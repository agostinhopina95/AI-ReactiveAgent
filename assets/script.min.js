const INCLUDE={URL:function(url,ver,id){ver=void 0===ver?"":"?v="+ver,void 0===id&&(id="");var ftype=url.split(".").pop().toLowerCase();if("css"==ftype){var l=document.createElement("link");l.className="include_link",l.rel="stylesheet",id&&(l.id=id),l.type="text/css",l.href=url+ver,$("body").append(l)}else if("js"==ftype){var s,r,t;r=!1,(s=document.createElement("script")).className="include_link",s.type="text/javascript",s.src=url+ver,id&&(s.id=id),s.onload=s.onreadystatechange=function(){!this.readyState||this.readyState},(t=document.getElementsByTagName("script")[0]).parentNode.insertBefore(s,t)}},REMOVE:function(){$(".include_link").remove()}},GEO={N:function(c){return[c[0]-1,c[1]]},E:function(c){return[c[0],c[1]+1]},S:function(c){return[c[0]+1,c[1]]},W:function(c){return[c[0],c[1]-1]},NE:function(c){return[c[0]-1,c[1]+1]},SE:function(c){return[c[0]+1,c[1]+1]},SW:function(c){return[c[0]+1,c[1]-1]},NW:function(c){return[c[0]-1,c[1]-1]},LIMIT:{N:function(c){return GEO.LIMIT.ROLE(GEO.N(c))},E:function(c){return GEO.LIMIT.ROLE(GEO.E(c))},S:function(c){return GEO.LIMIT.ROLE(GEO.S(c))},W:function(c){return GEO.LIMIT.ROLE(GEO.W(c))},NE:function(c){return GEO.LIMIT.ROLE(GEO.NE(c))},SE:function(c){return GEO.LIMIT.ROLE(GEO.SE(c))},SW:function(c){return GEO.LIMIT.ROLE(GEO.SW(c))},NW:function(c){return GEO.LIMIT.ROLE(GEO.NW(c))},ROLE:function(c){return!(!GEO.LIMIT.HURDLE(c)&&!GEO.LIMIT.BORDER(c))},BORDER:function(c){var tb=$.panel.warp_disp.find("table"),w=tb.find("tr").length,h=tb.find("tr").eq(0).find("td").length;return c[0]<=0||c[0]>w||c[1]<=0||c[1]>h},HURDLE:function(c){return"obstacle"==GEO.ATTR(c)[0]},WHERE_GOLD:null,GOAL:function(c){return"final"==GEO.ATTR(GEO.N(c))[0]?(GEO.LIMIT.WHERE_GOLD=1,!0):"final"==GEO.ATTR(GEO.E(c))[0]?(GEO.LIMIT.WHERE_GOLD=2,!0):"final"==GEO.ATTR(GEO.S(c))[0]?(GEO.LIMIT.WHERE_GOLD=3,!0):"final"==GEO.ATTR(GEO.W(c))[0]&&(GEO.LIMIT.WHERE_GOLD=4,!0)}},ATTR:function(c){if(c[0]<1||c[1]<1)return"";var tb,a=[],tmp=null,r=$.panel.warp_disp.find("table").find("tr").eq(c[0]-1).find("td").eq(c[1]-1);return(tmp=r.attr("class"))&&a.push(tmp),(tmp=r.attr("p"))&&a.push(tmp),a},POS:function(e){var p=e.parent(),Y=p.index()+1,X=1,d=p[0].cells;for(i=0;i<d.length;i++)$(d[i]).is(e)&&(X=i+1);return[Y,X]},ELEMENT:function(p){var tb;return $.panel.warp_disp.find("table").find("tr").eq(p[0]-1).find("td").eq(p[1]-1)},REPEAT:function(arr){for(var sorted_arr=arr.slice().sort(),results=[],i=0;i<sorted_arr.length-1;i++)sorted_arr[i+1][0]==sorted_arr[i][0]&&sorted_arr[i+1][1]==sorted_arr[i][1]&&results.push(sorted_arr[i]);return results},DRAW:function(c){$.panel.warp_disp.find("table td").removeClass("agent"),GEO.ELEMENT(c).addClass("agent")}},fn={scroll:function(e,c,a){void 0===c&&(c=!0),void 0===a&&(a=!1);var l=$(e)[0].scrollHeight,p=$(e).scrollTop(),m_error=418;setTimeout((function(){(a||l-p-418<=500&&!a)&&(c?$(e).scrollTop(l):$(e).scrollTop(0))}),100)}};